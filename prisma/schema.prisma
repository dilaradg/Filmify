generator client {
  provider        = "prisma-client"
  output          = "../src/generated/prisma"
  previewFeatures = ["nativeDistinct", "relationJoins"]
  engineType      = "client"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["film"]
}

model Schauspieler {
  id       Int     @id @default(autoincrement())
  vorname  String
  nachname String
  rolle    String?
  filmId   Int     @map("film_id")
  film     Film    @relation(fields: [filmId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([filmId])
  @@map("schauspieler")
  @@schema("film")
}

model Film {
  id                Int            @id @default(autoincrement())
  version           Int            @default(0)
  imdbId            String         @unique @map("imdb_id")
  titel             String
  bewertung         Int
  art               Filmart?
  dauerMin          Int?           @map("dauer_min")
  erscheinungsdatum DateTime?      @map("erscheinungsdatum") @db.Date
  erzeugt           DateTime       @default(now()) @db.Timestamp(6)
  aktualisiert      DateTime       @default(now()) @db.Timestamp(6)
  schauspieler      Schauspieler[]
  filmFile          FilmFile?
  beschreibung      Beschreibung?

  @@map("film")
  @@schema("film")
}

model FilmFile {
  id       Int     @id @default(autoincrement())
  data     Bytes
  filename String
  mimetype String?
  filmId   Int     @unique @map("film_id")
  film     Film    @relation(fields: [filmId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([filmId])
  @@map("film_file")
  @@schema("film")
}

model Beschreibung {
  id           Int    @id @default(autoincrement())
  beschreibung String @db.Text
  filmId       Int    @unique @map("film_id")
  film         Film   @relation(fields: [filmId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@map("beschreibung")
  @@schema("film")
}

enum Filmart {
  ROMCOM
  THRILLER
  DRAMA
  HORROR
  ANIME
  ANIMATION
  ACTION
  FANTASY
  SCI_FI
  MYSTERY
  BIOGRAFIE

  @@map("filmart")
  @@schema("film")
}
